# Tribler - 5th Report

## Index

1. [Introduction] (#introduction)
2. [Feature evolved] (#feature-evolved)
3. [Implementation] (#implementation)

***

### Introduction

On this last stage of the project we developed throughout the semester, the group was supposed to identify some part of our open-source project Tribler that could be improved. Later on we should carry out that improvement. This report serves the purpose of exposing the new feature as well as the process behind its implementation.

### Feature evolved

Although _Tribler_ has a [vast list of issues](https://github.com/Tribler/tribler/issues), after looking at them and taking in consideration that none of the group's elements had been in touch with the language in which _Tribler_ was developed, _Python_, we chose not to try to fix one of listed issues. Instead and after we tried the [desktop application](https://github.com/Tribler/tribler/releases/tag/v6.4.3) ourselves, we decided we would be improving (in our opinion, since we think we made it more user-friendly) the way the health of the torrent is displayed. We think that adding a number instead of just a bar makes it easier for the user to understand how healthy the torrent is. Before it wasn't very easy to compare the health of two torrents.

### Implementation

As we explained in the [the last report](https://github.com/pedrofraga/tribler/blob/devel/esof-docs/4.%20Software%20Verification%20and%20Validation.md), the [understandability](https://github.com/pedrofraga/tribler/blob/devel/esof-docs/4.%20Software%20Verification%20and%20Validation.md#understandability) of this project was not easy. It forced us to deeper code analisys, clearly there is a lack of information for the new developers. However we managed to add the desired feature with the following code blocks:

**widgets.py**
```python
dc.SetTextForeground(wx.Colour(0,0,0))
gc = wx.GraphicsContext.Create(dc)
font = wx.Font(7, wx.DEFAULT, wx.NORMAL, wx.BOLD)
gc.SetFont(font, wx.BLACK)
        
ratio = str(round(self.barwidth * 100)).rstrip('0').rstrip('.')
pos = 2 * len(ratio) + 3
ratioStr = ratio + '%'
        
gc.DrawText(ratioStr, width / 2 - pos, 1)

```

**list.py**

```python
control.SetMinSize((width + width, 12))
```


The code added to the **widgets.py** file creates a text into the health bar: first it sets the text appearance, and then it gets the health barwidth value and converts it to a string. After that, the text position is calculated according to the string length, so that the text is always centered.


The modified coded in the **list.py** makes the health bar height size bigger, in order to get a bigger text size (a user-friendly measure).



***Before and after comparison***

Before                     |  After
:-------------------------:|:-------------------------:
![](https://raw.githubusercontent.com/pedrofraga/tribler/devel/esof-docs/images/tribler_old.png)  |  ![](https://raw.githubusercontent.com/pedrofraga/tribler/devel/esof-docs/images/tribler_new.png)
